var mapTop, mapUnique;

var ramenTop = new Array();
var ramenType = new Array();

/**
* Text constants
**/

///////////////////////////////////////////////////////////////
// Top ramen
///////////////////////////////////////////////////////////////
ramenTop[0] = {
    name: "michi",
    info: "Tsukemen",
    lat: 35.7178, long: 139.7435
};

ramenTop[1] = {
    name: "ittou",
    info: "ramen",
    lat: 35.7178, long: 139.7434
};

ramenTop[2] = {
    name: "torisoba",
    info: "mutahiro nigo ten ramen",
    lat: 35.7178, long: 139.7433
};

ramenTop[3] = {
    name: "mendokoro",
    info: "mendokoro honda",
    lat: 35.7178, long: 139.6432
};

ramenTop[4] = {
    name: "gonoshin",
    info: "gonoshin seisakujo",
    lat: 35.7178, long: 139.7431
};

///////////////////////////////////////////////////////////////
// Type ramen
///////////////////////////////////////////////////////////////
ramenType[0] = {
    name: "shoyu",
    info: "スープにしょうゆタレを使用した日本のラーメン。" +
        "1910年（明治43年）に、浅草の來々軒で出された東京ラーメンが初出であり、日本のラ" +
        "ーメンの原型である。だしは鶏がらおよびその他の材料を数時間煮込んで作るが、" +
        "その他にトンコツや牛骨をもだしの材料とするラーメン店もあるなど多様。" +
        "ネギ、玉ねぎ、にんにく、にんじんの他にも独自の材料を加えるラーメン店も多く、背油" +
        "やラードなどの油を入れる店もある。"
}

ramenType[1] = {
    name: "miso",
    info: "ミソは肉の臭みを抑える効果がある。ダシはトンコツや野菜を使用し煮出している。"
}

ramenType[2] = {
    name: "tantan",
    info: "中国四川省発祥の辛みを効かせたひき肉やザーサイの細切りなどをのせた麺料理" +
        "陳建民が日本向けに改良した。"
}

ramenType[3] = {
    name: "shio",
    info: "ダシを塩ダレで調味したスープにゆでた中華麺を入れた日本のラーメン。" +
        "スープは鶏がらや豚骨を使用したダシを塩ダレで調味したものであり、豚骨ラーメンのダ" +
        "シのように強く煮出すことがないため混濁していない。"
}

/**
* MAIN
**/

///////////////////////////////////////////////////////////////
// Event - handle screen resize
///////////////////////////////////////////////////////////////
$(window).resize(function () {
    if ($(window).width() < 1000) {
        $("body").css("max-width", "100%");
    } else {
        $("body").css("max-width", "80%");
    }
});

///////////////////////////////////////////////////////////////
// Event - handle navigation bar
///////////////////////////////////////////////////////////////
var tab1stdata = $("nav ul").children().children().attr("href");
$(".tabContent").hide();
$(tab1stdata).show();
$("nav li a").click(function () {
    var tabItem = $(this).attr("href");
    $(".tabContent").hide();
    $(tabItem).fadeIn();

    //To redraw google map when activated
    var currentCenter = mapTop.map.getCenter();
    google.maps.event.trigger(mapTop.map, 'resize');
    mapTop.map.setCenter(currentCenter);

    currentCenter = mapUnique.map.getCenter();
    google.maps.event.trigger(mapUnique.map, 'resize');
    mapUnique.map.setCenter(currentCenter);
});

/**
* TOP RAMEN SECTION
**/

////////////////////////////////////////////////////////////////
// Event - top ramen nav click
///////////////////////////////////////////////////////////////
$("#top .containerNav ul li").click(function () {
    var selectedID = $(this).index();
    var newLatLng = new google.maps.LatLng(ramenTop[selectedID].lat, ramenTop[selectedID].long);
    mapTop.marker.setPosition(newLatLng);
    mapTop.map.setCenter(newLatLng);

    $("#top .containerContent p").text(ramenTop[selectedID].info);
});

///////////////////////////////////////////////////////////////
// Event - initialise GMap
///////////////////////////////////////////////////////////////
google.maps.event.addDomListener(window, 'load', mapTop = initializeGMap("map_canvas", ramenTop[0].lat, ramenTop[0].long));

/**
* UNIQUE RAMEN SECTION
**/

////////////////////////////////////////////////////////////////
// Event - unique ramen nav click
///////////////////////////////////////////////////////////////
$("#unique .containerNav ul li").click(function () {
    var selectedID = $(this).index();
    var newLatLng = new google.maps.LatLng(ramenTop[selectedID].lat, ramenTop[selectedID].long);
    mapUnique.marker.setPosition(newLatLng);
    mapUnique.map.setCenter(newLatLng);

    $("#unique .containerContent p").text(ramenTop[selectedID].info);
});

///////////////////////////////////////////////////////////////
// Event - initialise GMap
///////////////////////////////////////////////////////////////
google.maps.event.addDomListener(window, 'load', mapUnique = initializeGMap("map_canvas2", ramenTop[0].lat, ramenTop[0].long));

/**
* TYPE RAMEN SECTION
**/

////////////////////////////////////////////////////////////////
// Event - type ramen nav click
///////////////////////////////////////////////////////////////
$("#type .containerNav ul li").click(function () {
    var selectedID = $(this).index();
    $("#type .containerContent p").text(ramenType[selectedID].info);
});


/**
* FUNCTIONS
**/
function initializeGMap(id, lat, long) {
    var map, marker;
    var map_canvas = document.getElementById(id);
    var map_options = {
        center: new google.maps.LatLng(lat, long),
        disableDefaultUI: true,
        zoom: 18,
    }

    map = new google.maps.Map(map_canvas, map_options);

    var location = new google.maps.LatLng(lat, long);
    marker = new google.maps.Marker({
        position: location,
        map: map,
        title: "Hello World!"
    });

    var contentString = "東京都文京区小石川五丁目41番10号 住友不動産小石川ビル";

    var infowindow = new google.maps.InfoWindow({
        content: contentString
    });

    google.maps.event.addListener(marker, 'click', function () {
        infowindow.open(map, marker);
    });

    return {
        map: map,
        marker: marker
    };
}